# Synthetic-Temporal-Networks

This repository contains the empirical data, scripts, functions and notebook necessary to generate high-resolution temporal synthetic networks using the approaches (class-mixing and friendship-based) introduced in

Calmon, L., Colosi, E., Bassignana, G., Barrat, A. and Colizza, V.
‘Preserving friendships in school contacts: an algorithm to construct
synthetic temporal networks for epidemic modelling’


This code can be redistributed and/or modified
under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 4 of the License, or (at
your convenience) any later version.

If you use this repository please cite the following papers:

[1] Calmon, L., Colosi, E., Bassignana, G., Barrat, A. and Colizza, V.
‘Preserving friendships in school contacts: an algorithm to construct
synthetic temporal networks for epidemic modelling’

[2] R. Mastrandrea, J. Fournet, A. Barrat,
Contact patterns in a high school: a comparison between data collected using wearable sensors, contact diaries and friendship surveys.
PLoS ONE 10(9): e0136497 (2015)

# Content of the repository:

## Scripts:
### generating synthetic contacts
_1-friendship-based.py_: Script to generate synthetic contacts using the friendship-based approach
_2-class-mixing.py_: Script to generate synthetic contacts using the class-mixing approach

### arranging daily contacts in multi day sequences
_4-build-contact-sequences.py_: Script to build contact sequences from contacts generated with files _1-friendship-based.py_,  _2-class-mixing.py_ (as well as looped contacts generated from the input _CP-tidy-2345.csv_ ). 

NB: this file requires as inputs a sufficient number of synthetic daily contacts that need to be generated with _1-friendship-based.py_ (using optimised parameters) and _2-class-mixing.py_. The output directories of _1-friendship-based.py_ and _2-class-mixing.py_ are set to be the same as the input directories of _4-build-contact-sequences.py_

## Notebooks:
_3-optimisation.ipynb_: Notebook to optimise the parameters of the friendship-based approach. 
NB: This notebook requires as input contacts generated with the file _1-friendship-based.py_. The file is set up to load pre-generated pickled inputs provided in the repository, in the folder copies-friendship-based-4d. These pickled files are generated automatically in the notebook _3-optimisation.ipynb_

## Functions:
_func_both_alg_and_opt.py_: File containing functions necessary to run all other scripts and notebooks provided.
## Empirical data provided:
_data_in/CP-tidy-2345.csv_: This file contains empirical contact data from which synthetic contacts can be built. This is an input to the files _1-friendship-based.py_, _2-class-mixing.py_, _3-optimisation.ipynb_ and 

This data set was obtained from public data, available from http://www.sociopatterns.org/datasets/high-school-contact-and-friendship-networks/, and was postprocessed by the authors to 
- select the four full days recorded (removing the first day)
- create the variable "t_all_days" counting time (in seconds) that resets every day at midnight.
- create a variable "t_day" counting time (in seconds) over the full data collection, initialised at midnight on day 1.
- create the variable "day" that identifies the day (2,3,4,5) over which the contacts take place.
- create the variable "w" set to the duration of each contact (=20 seconds)

## Pickled files for optimisation
Pickled files containing synthetic contact data used for the optimisation of the parameters in the paper are provided. These files are automatically loaded by the notebook _3-optimisation.ipynb_ to retrieve optimised parameters.

_copies-friendship-based-4d/dfCP_synrepfp_tr.pickle_: pickled file containing a dictionary of data_frames of synthetic contacts generated with the friendship-based approach. Generated by and loaded with _3-optimisation.ipynb_
